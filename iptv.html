<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TV Player for Samsung</title>
<style>
/* –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò */
* { margin:0; padding:0; box-sizing:border-box; }
body { 
  background:#111; 
  color:#fff; 
  font-family:Arial, sans-serif;
  padding:10px;
  font-size:14px;
}

/* –®–ê–ü–ö–ê */
.header {
  background:#0066cc;
  padding:15px;
  text-align:center;
  border-radius:5px;
  margin-bottom:15px;
}
.header h1 {
  font-size:20px;
  margin:0;
}

/* –ù–ê–í–ò–ì–ê–¶–ò–Ø –ü–û –í–ö–õ–ê–î–ö–ê–ú */
.tabs {
  display:flex;
  background:#222;
  border-radius:5px;
  overflow:hidden;
  margin-bottom:15px;
}
.tab {
  flex:1;
  padding:12px 5px;
  background:#333;
  border:none;
  color:#ccc;
  font-size:14px;
  text-align:center;
  cursor:pointer;
  border-right:1px solid #444;
}
.tab:last-child {
  border-right:none;
}
.tab.active {
  background:#0066cc;
  color:#fff;
  font-weight:bold;
}

/* –°–ü–ò–°–ö–ò –ö–ê–ù–ê–õ–û–í */
.channel-list {
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:8px;
  margin-bottom:20px;
}
.channel-btn {
  background:#222;
  border:2px solid #333;
  color:#fff;
  padding:12px 8px;
  font-size:13px;
  text-align:center;
  cursor:pointer;
  border-radius:5px;
  height:60px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.channel-btn.active {
  background:#0066cc;
  border-color:#00a8ff;
  font-weight:bold;
}
.channel-btn:hover {
  background:#333;
}

/* –ü–õ–ï–ï–† */
.player {
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:#000;
  z-index:1000;
  display:none;
  flex-direction:column;
}
.player.active {
  display:flex;
}
.player-header {
  background:#0066cc;
  padding:12px 15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.player-title {
  font-size:16px;
  font-weight:bold;
}
.player-close {
  background:#cc0000;
  border:none;
  color:#fff;
  width:35px;
  height:35px;
  font-size:18px;
  border-radius:50%;
  cursor:pointer;
}
.video-container {
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:10px;
}
#video-player {
  width:100%;
  max-width:1200px;
  max-height:70vh;
}
.player-controls {
  background:#222;
  padding:12px;
  display:flex;
  justify-content:center;
  gap:15px;
}
.ctrl-btn {
  background:#0066cc;
  border:none;
  color:#fff;
  padding:10px 20px;
  font-size:14px;
  border-radius:5px;
  cursor:pointer;
  min-width:120px;
}
.ctrl-btn:active {
  background:#0055aa;
}

/* –†–ê–î–ò–û –ü–ê–ù–ï–õ–¨ */
.radio-panel {
  position:fixed;
  bottom:0; left:0; right:0;
  background:#222;
  padding:12px 15px;
  border-top:3px solid #0066cc;
  display:none;
  z-index:900;
}
.radio-panel.active {
  display:block;
}
.radio-info {
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.radio-text {
  flex:1;
}
.radio-name {
  font-size:15px;
  font-weight:bold;
  margin-bottom:3px;
}
.radio-status {
  font-size:12px;
  color:#aaa;
}
.radio-controls {
  display:flex;
  gap:8px;
}
.radio-btn {
  background:#0066cc;
  border:none;
  color:#fff;
  width:35px;
  height:35px;
  font-size:14px;
  border-radius:50%;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
.stop-btn {
  background:#cc0000;
}

/* –ò–ù–§–û –ü–ê–ù–ï–õ–¨ */
.info-panel {
  position:fixed;
  top:10px; right:10px;
  background:rgba(0,0,0,0.8);
  padding:8px 12px;
  border-radius:5px;
  font-size:12px;
  color:#0f0;
  display:none;
  z-index:2000;
}

/* –ü–ê–ì–ò–ù–ê–¶–ò–Ø */
.pagination {
  display:flex;
  justify-content:center;
  gap:10px;
  margin:15px 0;
}
.page-btn {
  background:#333;
  border:none;
  color:#fff;
  padding:8px 15px;
  border-radius:3px;
  cursor:pointer;
}
.page-btn.active {
  background:#0066cc;
}

/* –°–¢–ê–¢–£–° –ë–ê–† */
.status-bar {
  position:fixed;
  bottom:5px; left:10px;
  color:#888;
  font-size:11px;
}

/* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
@media (min-width: 768px) {
  .channel-list {
    grid-template-columns:repeat(3, 1fr);
  }
  .channel-btn {
    font-size:14px;
    height:65px;
  }
}
</style>
</head>
<body>

<!-- –®–ê–ü–ö–ê -->
<div class="header">
  <h1>üì∫ –¢–ï–õ–ï–í–ò–ó–û–† PRO</h1>
</div>

<!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
<div class="tabs">
  <button class="tab active" onclick="showSection('tv')">–¢–ï–õ–ï–ö–ê–ù–ê–õ–´</button>
  <button class="tab" onclick="showSection('radio')">–†–ê–î–ò–û</button>
  <button class="tab" onclick="showSection('webcams')">–ö–ê–ú–ï–†–´</button>
</div>

<!-- –ü–ê–ì–ò–ù–ê–¶–ò–Ø -->
<div class="pagination" id="pagination"></div>

<!-- –¢–í –ö–ê–ù–ê–õ–´ -->
<div id="tv-section">
  <div class="channel-list" id="tv-channels"></div>
</div>

<!-- –†–ê–î–ò–û -->
<div id="radio-section" style="display:none">
  <div class="channel-list" id="radio-stations"></div>
</div>

<!-- –í–ï–ë-–ö–ê–ú–ï–†–´ -->
<div id="webcams-section" style="display:none">
  <div class="channel-list" id="webcams-list"></div>
</div>

<!-- –í–ò–î–ï–û –ü–õ–ï–ï–† -->
<div class="player" id="player">
  <div class="player-header">
    <div class="player-title" id="player-title">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    <button class="player-close" onclick="closePlayer()">‚úï</button>
  </div>
  <div class="video-container">
    <video id="video-player" controls></video>
  </div>
  <div class="player-controls">
    <button class="ctrl-btn" onclick="prevChannel()">‚óÄ –ü–†–ï–î–´–î–£–©–ò–ô</button>
    <button class="ctrl-btn" onclick="nextChannel()">–°–õ–ï–î–£–Æ–©–ò–ô ‚ñ∂</button>
    <button class="ctrl-btn" onclick="toggleFullscreen()">–ü–û–õ–ù–´–ô –≠–ö–†–ê–ù</button>
  </div>
</div>

<!-- –†–ê–î–ò–û –ü–ê–ù–ï–õ–¨ -->
<div class="radio-panel" id="radio-panel">
  <div class="radio-info">
    <div class="radio-text">
      <div class="radio-name" id="radio-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏—é</div>
      <div class="radio-status" id="radio-status">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
    </div>
    <div class="radio-controls">
      <button class="radio-btn" onclick="toggleRadio()" id="radio-toggle">‚ñ∂</button>
      <button class="radio-btn stop-btn" onclick="stopRadio()">‚èπ</button>
      <button class="radio-btn" onclick="nextRadio()">‚ñ∫|</button>
    </div>
  </div>
</div>

<!-- –ò–ù–§–û –ü–ê–ù–ï–õ–¨ -->
<div class="info-panel" id="info-panel"></div>

<!-- –°–¢–ê–¢–£–° –ë–ê–† -->
<div class="status-bar" id="status-bar">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>

<script>
// ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
let currentSection = 'tv';
let currentIndex = -1;
let audioElement = null;
let currentPage = 0;
let itemsPerPage = 12;

// ========== –í–°–ï –ö–ê–ù–ê–õ–´ –ò–ó –í–ê–®–ï–ì–û –§–ê–ô–õ–ê ==========
const TV_CHANNELS = [
  {name: "–ß–Å!", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_PERETZ/variant.m3u8"},
  {name: "–ü–ï–†–ï–¶", url: "https://cdn4.skygo.mn/live/disk1/Che/HLSv3-FTA/Che.m3u8"},
  {name: "–ü–Ø–¢–ù–ò–¶–ê –ò–ù–¢–ï–†", url: "https://cdn4.skygo.mn/live/disk1/Friday/HLSv3-FTA/Friday.m3u8"},
  {name: "–ü–Ø–¢–ù–ò–¶–ê", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_PYATNIZZA/variant.m3u8"},
  {name: "–ú–ê–¢–ß –¢–í", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_MATCHTV/variant.m3u8"},
  {name: "–†–ï–ù –¢–í", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_RENTV/variant.m3u8"},
  {name: "–°–¢–°", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_STS/variant.m3u8"},
  {name: "–°–¢–° LOVE", url: "http://zabava-htlive.cdn.ngenix.net/hls/CH_STSLOVE/variant.m3u8"},
  {name: "–¢–ù–¢", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_TNT/variant.m3u8"},
  {name: "–¢–ù–¢4", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_TNT4/variant.m3u8"},
  {name: "–¢–ù–¢4+", url: "https://cdn4.skygo.mn/live/disk1/TNT4/HLSv3-FTA/TNT4.m3u8"},
  {name: "–Æ", url: "http://zabava-htlive.cdn.ngenix.net/hls/CH_U/variant.m3u8"},
  {name: "–°–£–ë–ë–û–¢–ê", url: "http://zabava-htlive.cdn.ngenix.net/hls/CH_SUPER/variant.m3u8"},
  {name: "2X2", url: "http://zabava-htlive.cdn.ngenix.net/hls/CH_2X2/variant.m3u8"},
  {name: "–ú–£–ó –¢–í", url: "http://zabava-htlive.cdn.ngenix.net/hls/CH_MUZTV/variant.m3u8"},
  {name: "KINO-1", url: "https://kino-1.catcast.tv/content/38617/index.m3u8"},
  {name: "–ú–ò–†", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_MIR/variant.m3u8"},
  {name: "–¢–í3", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_TV3/variant.m3u8"},
  {name: "–ù–¢–í", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_NTV/variant.m3u8"},
  {name: "–†–û–°–°–ò–Ø-1", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_RUSSIA1/variant.m3u8"},
  {name: "–†–û–°–°–ò–Ø 24", url: "http://zabava-htlive.cdn.ngenix.net/hls/CH_RUSSIA24/variant.m3u8"},
  {name: "1 –¢–í", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_1TVSD/variant.m3u8"},
  {name: "–ö–ê–ú–ò–ù", url: "https://rt-vlg-nn-htlive.cdn.ngenix.net/hls/CH_R05_KAMINTV/variant.m3u8"},
  {name: "–¢–í –¶–ï–ù–¢–†", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_TVC/variant.m3u8"},
  {name: "5 –ö–ê–ù–ê–õ", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_5TV/variant.m3u8"},
  {name: "–î–û–ú–ê–®–ù–ò–ô", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_DOMASHNIY/variant.m3u8"},
  {name: "–î–û–ú–ê–®–ù–ò–ô+", url: "https://cdn4.skygo.mn/live/disk1/Domashni/HLSv3-FTA/Domashni.m3u8"},
  {name: "–†–û–°–°–ò–Ø –ö–£–õ–¨–¢–£–†–ê", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_RUSSIAK/variant.m3u8"},
  {name: "–ó–í–ï–ó–î–ê", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_ZVEZDA/variant.m3u8"},
  {name: "–û–¢–†", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_OTR/variant.m3u8"},
  {name: "–ó–í–ï–ó–î–ê+", url: "https://tvzvezda.bonus-tv.ru/cdn/zvezdaplus/mono.ts.m3u8"},
  {name: "–¢–í –ö–†–´–ú", url: "https://live1.1tvcrimea.ru/1tvcrimea.m3u8"},
  {name: "–°–ü–ê–°", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_SPAS/variant.m3u8"},
  {name: "EUROSPORT 4K", url: "http://6f1f83d9.akadatel.com/iptv/ET85VGCD8YTWLC/31475/index.m3u8"},
  {name: "EUROSPORT 1 HD", url: "http://6f1f83d9.akadatel.com/iptv/ET85VGCD8YTWLC/228/index.m3u8"},
  {name: "EUROSPORT 2 HD", url: "http://6f1f83d9.akadatel.com/iptv/ET85VGCD8YTWLC/234/index.m3u8"},
  {name: "–ú–û–Ø –ü–õ–ê–ù–ï–¢–ê", url: "http://194.143.148.28:8080/Nauka20/mpegts"}
];

const RADIO_STATIONS = [
  {name: "–ï–í–†–û–ü–ê –ü–õ–Æ–°", url: "https://hls-01-regions.emgsound.ru/11_msk/playlist.m3u8"},
  {name: "–ê–í–¢–û–†–ê–î–ò–û", url: "https://pub0301.101.ru:8443/stream/air/aac/64/200"},
  {name: "–†–£–°–°–ö–û–ï –†–ê–î–ò–û", url: "https://rusradio.hostingradio.ru/rusradio96.aacp"},
  {name: "DFM", url: "https://dfm.hostingradio.ru/dfm96.aacp"},
  {name: "–ù–ê–®–ï –†–ê–î–ò–û", url: "https://nashe1.hostingradio.ru/nashe-256"},
  {name: "RECORD LIQUID FUNK", url: "https://hls-01-radiorecord.hostingradio.ru/record-liquidfunk/playlist.m3u8"},
  {name: "DFM", url: "https://hls-01-dfm.hostingradio.ru/dfm/playlist.m3u8"},
  {name: "ROMANTIKA 98.8 FM", url: "https://hls-01-gpm.hostingradio.ru/romantika495/playlist.m3u8"},
  {name: "–†–ê–î–ò–û –í–ï–†–ê", url: "https://radiovera.hostingradio.ru:8000/radiovera-256.mp3"},
  {name: "ROCK RADIO", url: "https://rockradio.hostingradio.ru:8052/rock128.mp3"},
  {name: "–î–û–†–û–ñ–ù–û–ï –†–ê–î–ò–û", url: "https://dorognoe.hostingradio.ru/radio"}
];

const WEBCAMS = [
  {name: "–ê–†–ì–ï–ù–¢–ò–ù–ê - –ü–õ–Ø–ñ", url: "https://video.estadodelmar.com.ar/mobile/torreon/index.m3u8"},
  {name: "–ê–†–ì–ï–ù–¢–ò–ù–ê - –ü–û–ë–ï–†–ï–ñ–¨–ï", url: "https://video5.estadodelmar.com.ar/mobile/chapadmal5/index.m3u8"},
  {name: "–ê–†–ì–ï–ù–¢–ò–ù–ê - –ü–õ–Ø–ñ –ì–†–ê–ù–î–ï", url: "https://video5.estadodelmar.com.ar/mobile/yacht/index.m3u8"},
  {name: "–ú–ê–†-–î–ï–õ–¨-–ü–õ–ê–¢–ê", url: "https://video2.estadodelmar.com.ar/mobile/laperla/index.m3u8"},
  {name: "–ö–ê–ë–û-–í–ï–†–î–ï - –ü–õ–Ø–ñ", url: "https://s34.ipcamlive.com/streams/22dvnaeb0q8rgukre/stream.m3u8"},
  {name: "–ö–ê–ô–ú–ê–ù–û–í–´ –û–°–¢–†–û–í–ê", url: "https://s71.ipcamlive.com/streams/47beaupdde04nxbyg/stream.m3u8"},
  {name: "–ö–ê–ô–ú–ê–ù–û–í–´ - –û–¢–ï–õ–¨", url: "https://s132.ipcamlive.com/streams/84s7s1rmaxgqcihna/stream.m3u8"},
  {name: "–†–ò–§ –ê–ö–í–ê–†–ò–£–ú", url: "https://5ad79df289937.streamlock.net/Aquarium-WebCams/Secret-Reef.stream/chunklist.m3u8"},
  {name: "–ü–ò–ù–ì–í–ò–ù–´", url: "https://5ad79df289937.streamlock.net/Aquarium-WebCams/Penguins.stream/chunklist.m3u8"},
  {name: "–ù–¨–Æ-–ô–û–†–ö - –¢–ê–ô–ú–° –°–ö–í–ï–†", url: "https://www.earthcam.net/projects/common/js/embedviewer.php?type=h264&vid=hdtimes10.flv"},
  {name: "–°–¢–ê–¢–£–Ø –°–í–û–ë–û–î–´", url: "https://www.earthcam.net/projects/common/js/embedviewer.php?type=h264&vid=statueoflibertyHD.flv"}
];

// ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
window.onload = function() {
  updateStatus("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ");
  loadSection('tv');
  setupKeyboard();
  showInfo("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏");
};

// ========== –ó–ê–ì–†–£–ó–ö–ê –†–ê–ó–î–ï–õ–ê ==========
function loadSection(section) {
  currentSection = section;
  currentPage = 0;
  
  // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
  var tabs = document.getElementsByClassName('tab');
  for (var i = 0; i < tabs.length; i++) {
    tabs[i].className = 'tab';
  }
  document.querySelector('.tab[onclick*="' + section + '"]').className = 'tab active';
  
  // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
  document.getElementById('tv-section').style.display = 'none';
  document.getElementById('radio-section').style.display = 'none';
  document.getElementById('webcams-section').style.display = 'none';
  
  // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª
  document.getElementById(section + '-section').style.display = 'block';
  
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–Ω–∞–ª—ã
  loadChannels();
  updateStatus("–†–∞–∑–¥–µ–ª: " + getSectionName(section));
}

function getSectionName(section) {
  switch(section) {
    case 'tv': return '–¢–µ–ª–µ–∫–∞–Ω–∞–ª—ã';
    case 'radio': return '–†–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏–∏';
    case 'webcams': return '–í–µ–±-–∫–∞–º–µ—Ä—ã';
    default: return section;
  }
}

// ========== –ó–ê–ì–†–£–ó–ö–ê –ö–ê–ù–ê–õ–û–í –° –ü–ê–ì–ò–ù–ê–¶–ò–ï–ô ==========
function loadChannels() {
  var containerId = currentSection + '-channels';
  var container = document.getElementById(containerId);
  var channels = getCurrentChannels();
  
  // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  container.innerHTML = '';
  
  // –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  var start = currentPage * itemsPerPage;
  var end = Math.min(start + itemsPerPage, channels.length);
  var pageItems = channels.slice(start, end);
  
  // –°–æ–∑–¥–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
  for (var i = 0; i < pageItems.length; i++) {
    var channel = pageItems[i];
    var btn = document.createElement('button');
    btn.className = 'channel-btn';
    btn.innerHTML = channel.name;
    btn.onclick = (function(index) {
      return function() {
        playChannel(start + index);
      };
    })(i);
    container.appendChild(btn);
  }
  
  // –û–±–Ω–æ–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
  updatePagination(channels.length);
  
  // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
  updateStatus(getSectionName(currentSection) + ': ' + channels.length + ' –∫–∞–Ω–∞–ª–æ–≤, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ' + (currentPage + 1));
}

function getCurrentChannels() {
  switch(currentSection) {
    case 'tv': return TV_CHANNELS;
    case 'radio': return RADIO_STATIONS;
    case 'webcams': return WEBCAMS;
    default: return [];
  }
}

// ========== –ü–ê–ì–ò–ù–ê–¶–ò–Ø ==========
function updatePagination(totalItems) {
  var pagination = document.getElementById('pagination');
  var totalPages = Math.ceil(totalItems / itemsPerPage);
  
  if (totalPages <= 1) {
    pagination.innerHTML = '';
    return;
  }
  
  var html = '';
  for (var i = 0; i < totalPages; i++) {
    var active = i === currentPage ? 'active' : '';
    html += '<button class="page-btn ' + active + '" onclick="goToPage(' + i + ')">' + (i + 1) + '</button>';
  }
  pagination.innerHTML = html;
}

function goToPage(page) {
  currentPage = page;
  loadChannels();
}

// ========== –í–û–°–ü–†–û–ò–ó–í–ï–î–ï–ù–ò–ï ==========
function playChannel(index) {
  var channels = getCurrentChannels();
  if (index < 0 || index >= channels.length) return;
  
  currentIndex = index;
  var item = channels[index];
  
  // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
  var buttons = document.querySelectorAll('#' + currentSection + '-channels .channel-btn');
  for (var i = 0; i < buttons.length; i++) {
    buttons[i].className = 'channel-btn';
  }
  var pageIndex = index - (currentPage * itemsPerPage);
  if (buttons[pageIndex]) {
    buttons[pageIndex].className = 'channel-btn active';
  }
  
  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
  if (currentSection === 'radio') {
    playRadio(item);
  } else {
    playVideo(item);
  }
  
  updateStatus("–ò–≥—Ä–∞–µ—Ç: " + item.name);
  showInfo(item.name, 2000);
}

function playVideo(item) {
  // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–¥–∏–æ
  if (audioElement) {
    stopRadio();
  }
  
  // –û—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä
  document.getElementById('player-title').innerHTML = item.name;
  document.getElementById('player').className = 'player active';
  
  var videoPlayer = document.getElementById('video-player');
  videoPlayer.src = item.url;
  videoPlayer.load();
  
  // –ü–æ–ø—ã—Ç–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
  setTimeout(function() {
    videoPlayer.play().catch(function(e) {
      showInfo("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –ø—Ä–æ–±—É—é —Å–ª–µ–¥—É—é—â–∏–π...", 2000);
      setTimeout(nextChannel, 2000);
    });
  }, 500);
}

function playRadio(item) {
  // –ó–∞–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä
  closePlayer();
  
  // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Ä–∞–¥–∏–æ
  if (audioElement) {
    audioElement.pause();
  }
  
  // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç
  audioElement = new Audio();
  audioElement.src = item.url;
  audioElement.crossOrigin = 'anonymous';
  
  // –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–±—ã—Ç–∏—è
  audioElement.onplay = function() {
    document.getElementById('radio-toggle').innerHTML = '‚è∏';
    document.getElementById('radio-status').innerHTML = '–ò–≥—Ä–∞–µ—Ç';
  };
  
  audioElement.onpause = function() {
    document.getElementById('radio-toggle').innerHTML = '‚ñ∂';
    document.getElementById('radio-status').innerHTML = '–ü–∞—É–∑–∞';
  };
  
  audioElement.onerror = function() {
    document.getElementById('radio-status').innerHTML = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è';
  };
  
  // –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞–Ω–µ–ª—å —Ä–∞–¥–∏–æ
  document.getElementById('radio-panel').className = 'radio-panel active';
  document.getElementById('radio-title').innerHTML = item.name;
  document.getElementById('radio-status').innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞...';
  
  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
  setTimeout(function() {
    audioElement.play().catch(function(e) {
      document.getElementById('radio-status').innerHTML = '–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è';
    });
  }, 500);
}

// ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ê–î–ò–û ==========
function toggleRadio() {
  if (audioElement) {
    if (audioElement.paused) {
      audioElement.play();
    } else {
      audioElement.pause();
    }
  }
}

function stopRadio() {
  if (audioElement) {
    audioElement.pause();
    audioElement.src = '';
    document.getElementById('radio-panel').className = 'radio-panel';
    updateStatus("–†–∞–¥–∏–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ");
  }
}

function nextRadio() {
  if (currentSection === 'radio') {
    nextChannel();
  }
}

// ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–õ–ï–ï–†–û–ú ==========
function closePlayer() {
  var videoPlayer = document.getElementById('video-player');
  videoPlayer.pause();
  videoPlayer.src = '';
  document.getElementById('player').className = 'player';
  updateStatus("–ü–ª–µ–µ—Ä –∑–∞–∫—Ä—ã—Ç");
}

function toggleFullscreen() {
  var player = document.getElementById('player');
  if (!document.fullscreenElement) {
    if (player.requestFullscreen) {
      player.requestFullscreen();
    } else if (player.webkitRequestFullscreen) {
      player.webkitRequestFullscreen();
    }
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    }
  }
}

// ========== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ö–ê–ù–ê–õ–û–í ==========
function prevChannel() {
  var channels = getCurrentChannels();
  if (channels.length === 0) return;
  
  var newIndex = currentIndex - 1;
  if (newIndex < 0) newIndex = channels.length - 1;
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ —Å–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
  var newPage = Math.floor(newIndex / itemsPerPage);
  if (newPage !== currentPage) {
    currentPage = newPage;
    loadChannels();
  }
  
  playChannel(newIndex);
}

function nextChannel() {
  var channels = getCurrentChannels();
  if (channels.length === 0) return;
  
  var newIndex = currentIndex + 1;
  if (newIndex >= channels.length) newIndex = 0;
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ —Å–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
  var newPage = Math.floor(newIndex / itemsPerPage);
  if (newPage !== currentPage) {
    currentPage = newPage;
    loadChannels();
  }
  
  playChannel(newIndex);
}

// ========== –ö–õ–ê–í–ò–ê–¢–£–†–ê ==========
function setupKeyboard() {
  document.onkeydown = function(e) {
    var key = e.keyCode || e.which;
    
    // ESC - –∑–∞–∫—Ä—ã—Ç—å –ø–ª–µ–µ—Ä
    if (key === 27) {
      closePlayer();
    }
    
    // –°—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    if (key === 37) { // –í–õ–ï–í–û
      if (document.getElementById('player').className.includes('active')) {
        prevChannel();
      } else {
        prevTab();
      }
    } else if (key === 39) { // –í–ü–†–ê–í–û
      if (document.getElementById('player').className.includes('active')) {
        nextChannel();
      } else {
        nextTab();
      }
    } else if (key === 38) { // –í–í–ï–†–•
      prevPage();
    } else if (key === 40) { // –í–ù–ò–ó
      nextPage();
    } else if (key === 13) { // ENTER
      if (currentIndex >= 0) {
        playChannel(currentIndex);
      }
    }
  };
}

function prevTab() {
  var tabs = ['tv', 'radio', 'webcams'];
  var currentIdx = tabs.indexOf(currentSection);
  var newIdx = currentIdx > 0 ? currentIdx - 1 : tabs.length - 1;
  loadSection(tabs[newIdx]);
}

function nextTab() {
  var tabs = ['tv', 'radio', 'webcams'];
  var currentIdx = tabs.indexOf(currentSection);
  var newIdx = currentIdx < tabs.length - 1 ? currentIdx + 1 : 0;
  loadSection(tabs[newIdx]);
}

function prevPage() {
  var channels = getCurrentChannels();
  var totalPages = Math.ceil(channels.length / itemsPerPage);
  if (totalPages <= 1) return;
  
  currentPage = currentPage > 0 ? currentPage - 1 : totalPages - 1;
  loadChannels();
}

function nextPage() {
  var channels = getCurrentChannels();
  var totalPages = Math.ceil(channels.length / itemsPerPage);
  if (totalPages <= 1) return;
  
  currentPage = currentPage < totalPages - 1 ? currentPage + 1 : 0;
  loadChannels();
}

// ========== –£–¢–ò–õ–ò–¢–´ ==========
function updateStatus(msg) {
  document.getElementById('status-bar').innerHTML = msg;
  console.log("TV Player: " + msg);
}

function showInfo(msg, duration) {
  var panel = document.getElementById('info-panel');
  panel.innerHTML = msg;
  panel.style.display = 'block';
  
  if (duration) {
    setTimeout(function() {
      panel.style.display = 'none';
    }, duration);
  }
}

// ========== –ë–´–°–¢–†–´–ï –¢–ï–°–¢–´ ==========
function testTV() {
  if (TV_CHANNELS.length > 0) {
    playChannel(0);
  }
}

function testRadio() {
  loadSection('radio');
  if (RADIO_STATIONS.length > 0) {
    playChannel(0);
  }
}
</script>

<!-- –ë–´–°–¢–†–´–ï –ö–ù–û–ü–ö–ò -->
<div style="position:fixed; top:10px; right:10px; z-index:2000; display:flex; gap:5px;">
  <button onclick="testTV()" style="background:#0066cc; color:white; border:none; padding:6px 10px; border-radius:3px; font-size:11px;">–¢–µ—Å—Ç –¢–í</button>
  <button onclick="testRadio()" style="background:#00aa66; color:white; border:none; padding:6px 10px; border-radius:3px; font-size:11px;">–¢–µ—Å—Ç –†–∞–¥–∏–æ</button>
  <button onclick="location.reload()" style="background:#cc6600; color:white; border:none; padding:6px 10px; border-radius:3px; font-size:11px;">–û–±–Ω–æ–≤–∏—Ç—å</button>
</div>

</body>
</html>